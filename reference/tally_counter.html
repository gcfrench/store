<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Count the number of remaining interactions — tally_counter • store</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Count the number of remaining interactions — tally_counter" />
<meta property="og:description" content="The main goal of the tally_counter is to provide a quick and easy way to monitor
progress whilst iterating through a data frame, applying a function to each row
at a time. This can be useful when the time taken for this step is sufficiently
long enough to run the script in the background, coming back to the console at
regular intervals to check the progress. To help with monitoring this progress,
the number of rows remaining can be displayed in the console so that you can see
at a glance how far the script has progressed and how far there is left to go." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">store</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    information
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/create_update_package_information.html">Create and update a package</a>
    </li>
    <li>
      <a href="../articles/raster_package_tutorial_notes.html">Raster package tutorial notes</a>
    </li>
    <li>
      <a href="../articles/postgres_database_notes.html">PostgreSQL database notes</a>
    </li>
    <li>
      <a href="../articles/validation_checks.html">Run validation checks</a>
    </li>
    <li>
      <a href="../articles/gdal_commands.html">GDAL commands</a>
    </li>
    <li>
      <a href="../articles/docker_notes.html">Docker notes</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">lookups and functions</a>
</li>
<li>
  <a href="../news/index.html">versions</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/gcfrench">
    <span class="fab fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/gcfrench/store">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Count the number of remaining interactions</h1>
    <small class="dont-index">Source: <a href='https://github.com/gcfrench/store/blob/master/R/tally.R'><code>R/tally.R</code></a></small>
    <div class="hidden name"><code>tally_counter.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The main goal of the tally_counter is to provide a quick and easy way to monitor
progress whilst iterating through a data frame, applying a function to each row
at a time. This can be useful when the time taken for this step is sufficiently
long enough to run the script in the background, coming back to the console at
regular intervals to check the progress. To help with monitoring this progress,
the number of rows remaining can be displayed in the console so that you can see
at a glance how far the script has progressed and how far there is left to go.</p>
    </div>

    <pre class="usage"><span class='fu'>tally_counter</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>The data frame to be used in the iteration.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>Which type of counter to use, either adding (add) or subtracting
(default = subtract) counts.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The data frame is returned invisibly so that the function can be
used in a piped workflow.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The counter is initiated by passing the data frame into this tally_counter function.
This can be done within a pipeline containing the iteration step, for example in
conjunction with the tidyverse suite of packages. It is used in conjunction with
the click function which updates the counter, either decreasing or increasing
the count by one. This up-to-date count can then be displayed in the console.</p>
<p>On initiation the counter is set to the count to the number of rows to be iterated
through, counting downwards to zero during the iteration step. This behaviour can be
changed through the type argument so that instead of counting downwards the counter
counts upwards from zero to the total number of iterations.</p>
<p>The number of digits displayed by the counter is set to four to mimic the appearance
of a real tally counter. However this number of digits is not fixed and will increase
to accommodate increasing number of iterations, so for example above 9,999 iterations
the number of digits increases to five, above 99,999 iterations six digits will be
displayed and so on.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other tally counter methods: 
<code><a href='click.html'>click</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/message.html'>suppressPackageStartupMessages</a></span><span class='op'>(</span><span class='op'>{</span>
  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://gcfrench.github.io/store'>store</a></span><span class='op'>)</span>
  <span class='fu'><a href='https://rdrr.io/r/base/warning.html'>suppressWarnings</a></span><span class='op'>(</span><span class='op'>{</span>
    <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://allisonhorst.github.io/palmerpenguins/'>palmerpenguins</a></span><span class='op'>)</span>
    <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>
    <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://stringr.tidyverse.org'>stringr</a></span><span class='op'>)</span>
    <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://purrr.tidyverse.org'>purrr</a></span><span class='op'>)</span>
  <span class='op'>}</span><span class='op'>)</span>
<span class='op'>}</span><span class='op'>)</span>

<span class='va'>penguin_stats</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>...</span><span class='op'>)</span> <span class='op'>{</span>

  <span class='co'># get row</span>
  <span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>...</span><span class='op'>)</span>

  <span class='co'># get penguins stats</span>
  <span class='va'>species</span> <span class='op'>&lt;-</span> <span class='fu'>purrr</span><span class='fu'>::</span><span class='fu'><a href='https://purrr.tidyverse.org/reference/pluck.html'>pluck</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='st'>"species"</span><span class='op'>)</span>
  <span class='va'>island</span> <span class='op'>&lt;-</span> <span class='fu'>purrr</span><span class='fu'>::</span><span class='fu'><a href='https://purrr.tidyverse.org/reference/pluck.html'>pluck</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='st'>"island"</span><span class='op'>)</span>
  <span class='va'>body_mass_g</span> <span class='op'>&lt;-</span> <span class='fu'>purrr</span><span class='fu'>::</span><span class='fu'><a href='https://purrr.tidyverse.org/reference/pluck.html'>pluck</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='st'>"body_mass_g"</span><span class='op'>)</span>
  <span class='va'>sex</span> <span class='op'>&lt;-</span> <span class='fu'>purrr</span><span class='fu'>::</span><span class='fu'><a href='https://purrr.tidyverse.org/reference/pluck.html'>pluck</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='st'>"sex"</span><span class='op'>)</span>
  <span class='va'>year</span> <span class='op'>&lt;-</span> <span class='fu'>purrr</span><span class='fu'>::</span><span class='fu'><a href='https://purrr.tidyverse.org/reference/pluck.html'>pluck</a></span><span class='op'>(</span><span class='va'>data</span>, <span class='st'>"year"</span><span class='op'>)</span>

  <span class='co'># print penguin stats</span>
  <span class='fu'><a href='https://rdrr.io/r/base/message.html'>message</a></span><span class='op'>(</span><span class='fu'>stringr</span><span class='fu'>::</span><span class='fu'><a href='https://stringr.tidyverse.org/reference/str_glue.html'>str_glue</a></span><span class='op'>(</span><span class='st'>"{click()} : The body mass for the {sex} {species} penguin recorded in {year} on {island} island is {body_mass_g} grams"</span><span class='op'>)</span><span class='op'>)</span>

<span class='op'>}</span>
<span class='va'>penguin_stats_slow</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://purrr.tidyverse.org/reference/insistently.html'>slowly</a></span><span class='op'>(</span><span class='va'>penguin_stats</span>, <span class='fu'><a href='https://purrr.tidyverse.org/reference/rate-helpers.html'>rate_delay</a></span><span class='op'>(</span><span class='fl'>0.1</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>penguins</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/slice.html'>slice_sample</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange</a></span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/desc.html'>desc</a></span><span class='op'>(</span><span class='va'>body_mass_g</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>tally_counter</span><span class='op'>(</span>type <span class='op'>=</span> <span class='st'>"add"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://purrr.tidyverse.org/reference/map2.html'>pwalk</a></span><span class='op'>(</span><span class='va'>penguin_stats_slow</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>0000 tally counter</span></div><div class='output co'>#&gt; <span class='message'>0001 : The body mass for the male Gentoo penguin recorded in 2007 on Biscoe island is 5700 grams</span></div><div class='output co'>#&gt; <span class='message'>0002 : The body mass for the male Gentoo penguin recorded in 2009 on Biscoe island is 5400 grams</span></div><div class='output co'>#&gt; <span class='message'>0003 : The body mass for the male Gentoo penguin recorded in 2007 on Biscoe island is 5050 grams</span></div><div class='output co'>#&gt; <span class='message'>0004 : The body mass for the female Gentoo penguin recorded in 2009 on Biscoe island is 4625 grams</span></div><div class='output co'>#&gt; <span class='message'>0005 : The body mass for the male Adelie penguin recorded in 2007 on Dream island is 4400 grams</span></div><div class='output co'>#&gt; <span class='message'>0006 : The body mass for the male Adelie penguin recorded in 2009 on Biscoe island is 4275 grams</span></div><div class='output co'>#&gt; <span class='message'>0007 : The body mass for the NA Adelie penguin recorded in 2007 on Torgersen island is 4250 grams</span></div><div class='output co'>#&gt; <span class='message'>0008 : The body mass for the male Adelie penguin recorded in 2007 on Dream island is 4150 grams</span></div><div class='output co'>#&gt; <span class='message'>0009 : The body mass for the male Adelie penguin recorded in 2009 on Dream island is 3900 grams</span></div><div class='output co'>#&gt; <span class='message'>0010 : The body mass for the female Adelie penguin recorded in 2007 on Torgersen island is 3625 grams</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Graham French.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


