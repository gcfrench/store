<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create multiple reports and sections • store</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Create multiple reports and sections">
<meta property="og:description" content="store">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">store</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    information
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/create_update_package_information.html">Create and update a package</a>
    </li>
    <li>
      <a href="../articles/raster_package_tutorial_notes.html">Raster package tutorial notes</a>
    </li>
    <li>
      <a href="../articles/postgres_database_notes.html">PostgreSQL database notes</a>
    </li>
    <li>
      <a href="../articles/validation_checks.html">Run validation checks</a>
    </li>
    <li>
      <a href="../articles/gdal_commands.html">GDAL commands</a>
    </li>
    <li>
      <a href="../articles/docker_notes.html">Docker notes</a>
    </li>
    <li>
      <a href="../articles/git_notes.html">Git and GitHub notes</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    reporting
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/create_multiple_reports_sections_notes.html">Create multiple reports and sections</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">lookups and functions</a>
</li>
<li>
  <a href="../news/index.html">versions</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://twitter.com/gcfrench">
    <span class="fab fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/gcfrench/store">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="create_multiple_reports_sections_notes_files/header-attrs-2.8/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Create multiple reports and sections</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gcfrench/store/blob/master/vignettes/create_multiple_reports_sections_notes.Rmd"><code>vignettes/create_multiple_reports_sections_notes.Rmd</code></a></small>
      <div class="hidden name"><code>create_multiple_reports_sections_notes.Rmd</code></div>

    </div>

    
    
<p>This document goes through the R Markdown scripts used create multiple reports containing mulitple sections, by splitting and outputting data both within a single report and across multiple reports. The use of child documents within a report is further described in section 16.4 of Yihui Xie <em>et al.</em> <a href="https://bookdown.org/yihui/rmarkdown-cookbook/child-document.html">R Markdown Cookbook</a>.</p>
<p>This example generates a report for each penguin species’ measurements, taken at each of their locations, with the measurements split by individual year within each report. The penguin measurements are taken from the palmerpenguins package’s <a href="https://allisonhorst.github.io/palmerpenguins/reference/penguins.html">penguin dataset</a>.</p>
<p>Creating the reports requires two R Markdown scripts. The first R Markdown, extracts the unique list of parameters required to create each report, which in this example are the unique species and location names. These parameters are passed onto the second R Markdown script which then creates the report, splitting the report into child templates that produce each of the sections within the report. In the example this produces a table of penguin measurements for each year.</p>
<p><img src="../man/figures/penguin_measurements_table.png" width="532"></p>
<p>Example table of penguin measurements, one of the yearly tables within a one of the penguin species on a particular island reports.</p>
<div id="first-r-markdown-script-penguin_measurements_report_run" class="section level2">
<h2 class="hasAnchor">
<a href="#first-r-markdown-script-penguin_measurements_report_run" class="anchor"></a>First R Markdown script (<strong>penguin_measurements_report_run)</strong>
</h2>
<p>This script is the one to run, iteratively passing the parameters into the second parameterized R Markdown script.</p>
<div id="yaml-header" class="section level3">
<h3 class="hasAnchor">
<a href="#yaml-header" class="anchor"></a>YAML header</h3>
<pre><code>---
output: html_document
---</code></pre>
</div>
<div id="package-libraries" class="section level3">
<h3 class="hasAnchor">
<a href="#package-libraries" class="anchor"></a>Package libraries</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/message.html">suppressPackageStartupMessages</a></span><span class="op">(</span><span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/warning.html">suppressWarnings</a></span><span class="op">(</span><span class="op">{</span>
    <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://allisonhorst.github.io/palmerpenguins/">palmerpenguins</a></span><span class="op">)</span>
    <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://stringr.tidyverse.org">stringr</a></span><span class="op">)</span>
    <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
    <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://purrr.tidyverse.org">purrr</a></span><span class="op">)</span>
    <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://fs.r-lib.org">fs</a></span><span class="op">)</span>
  <span class="op">}</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
</div>
<div id="create-directory" class="section level3">
<h3 class="hasAnchor">
<a href="#create-directory" class="anchor"></a>Create directory</h3>
<p>This creates the directory to save the reports, in this example a reports folder is created in the temporary directory.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="http://fs.r-lib.org/reference/create.html">dir_create</a></span><span class="op">(</span><span class="fu"><a href="http://fs.r-lib.org/reference/path.html">path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"reports"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="run-report-function" class="section level3">
<h3 class="hasAnchor">
<a href="#run-report-function" class="anchor"></a>Run report function</h3>
<p>This function takes the penguin details and passes them onto the rmarkdown::render function to be used in the second parameterized R Markdown script. The function is wrapped by the purrr::safely function so that a report generating an error is skipped rather than stopping the code running through the later iterations.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' @Title</span>
<span class="co">#' Run report</span>
<span class="co">#'</span>
<span class="co">#' @description</span>
<span class="co">#' Function to pass the penguin details as parameters into the second parameterized</span>
<span class="co">#' R Markdown report.</span>
<span class="co">#' </span>
<span class="co">#' @param ... three-dots used pass the penguin details as arguments based columns</span>
<span class="co">#' in a data frame. In this example the arguments are the penguin species and </span>
<span class="co">#' island name.</span>
<span class="co">#'</span>
<span class="co">#' @return passes the penguin species and island name to the second parameterized report.</span>
<span class="va">run_report</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span>

  <span class="va">penguin_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span>
  
  <span class="fu">rmarkdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html">render</a></span><span class="op">(</span>input <span class="op">=</span> <span class="st">"penguin_measurements_report.Rmd"</span>,
                    output_file <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"{pluck(penguin_details, 'species')}_{pluck(penguin_details, 'island')}.html"</span><span class="op">)</span>,
                    output_dir <span class="op">=</span> <span class="fu"><a href="http://fs.r-lib.org/reference/path.html">path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"reports"</span><span class="op">)</span>,
                    params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
                      species_name <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/pluck.html">pluck</a></span><span class="op">(</span><span class="va">penguin_details</span>, <span class="st">"species"</span><span class="op">)</span>,
                      island_name <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/pluck.html">pluck</a></span><span class="op">(</span><span class="va">penguin_details</span>, <span class="st">"island"</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">}</span>
<span class="va">safe_run_report</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/safely.html">safely</a></span><span class="op">(</span><span class="va">run_report</span><span class="op">)</span></code></pre></div>
</div>
<div id="get-penguin-details" class="section level3">
<h3 class="hasAnchor">
<a href="#get-penguin-details" class="anchor"></a>Get penguin details</h3>
<p>The species and island names for each penguin species on each island are individually passed into the <strong>run_report</strong> function to be used as parameters in the second parameterized R Markdown script.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">penguin_details</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">species</span>, <span class="va">island</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="op">)</span> 

<span class="va">penguin_details</span><span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map2.html">pmap</a></span><span class="op">(</span><span class="va">safe_run_report</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="second-r-markdown-script-penguin_measurements_report" class="section level2">
<h2 class="hasAnchor">
<a href="#second-r-markdown-script-penguin_measurements_report" class="anchor"></a>Second R Markdown script (penguin_measurements_report)</h2>
<div id="yaml-header-1" class="section level3">
<h3 class="hasAnchor">
<a href="#yaml-header-1" class="anchor"></a>YAML header</h3>
<p>Penguins details passed in as parameters using the params section with NA_character_ as the default.</p>
<pre><code>---
output: html_document
params:
  species_name: NA_character_
  island_name: NA_character_
---</code></pre>
</div>
<div id="knitr-options" class="section level3">
<h3 class="hasAnchor">
<a href="#knitr-options" class="anchor"></a>Knitr options</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/knitr/man/opts_chunk.html">opts_chunk</a></span><span class="op">$</span><span class="fu">set</span><span class="op">(</span>echo <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
</div>
<div id="package-libraries-1" class="section level3">
<h3 class="hasAnchor">
<a href="#package-libraries-1" class="anchor"></a>Package libraries</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/message.html">suppressPackageStartupMessages</a></span><span class="op">(</span><span class="op">{</span>
  <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://gcfrench.github.io/store">store</a></span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/warning.html">suppressWarnings</a></span><span class="op">(</span><span class="op">{</span>
    <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://allisonhorst.github.io/palmerpenguins/">palmerpenguins</a></span><span class="op">)</span>
    <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
    <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://purrr.tidyverse.org">purrr</a></span><span class="op">)</span>
    <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org">tidyr</a></span><span class="op">)</span>
    <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://stringr.tidyverse.org">stringr</a></span><span class="op">)</span>
    <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://gt.rstudio.com/">gt</a></span><span class="op">)</span>
    <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sfirke/janitor">janitor</a></span><span class="op">)</span>
  <span class="op">}</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
</div>
<div id="get-penguin-details-1" class="section level3">
<h3 class="hasAnchor">
<a href="#get-penguin-details-1" class="anchor"></a>Get penguin details</h3>
<p>Penguins details taken from palmerpenguins’ penguin dataset filtered on species and island name.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Assign parameterized values</span>
<span class="va">species_name</span> <span class="op">&lt;-</span> <span class="va">params</span><span class="op">$</span><span class="va">species_name</span>
<span class="va">island_name</span> <span class="op">&lt;-</span> <span class="va">params</span><span class="op">$</span><span class="va">island_name</span>

<span class="co"># Filter on parameterized values</span>
<span class="va">penguin_data</span> <span class="op">&lt;-</span> <span class="va">penguins</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">species</span> <span class="op">==</span> <span class="va">species_name</span>, <span class="va">island</span> <span class="op">==</span> <span class="va">island_name</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">sex</span>, <span class="va">body_mass_g</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains</a></span><span class="op">(</span><span class="st">"mm"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># Get years</span>
<span class="va">year_value</span> <span class="op">&lt;-</span> <span class="va">penguin_data</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
<div id="report-text" class="section level3">
<h3 class="hasAnchor">
<a href="#report-text" class="anchor"></a>Report text</h3>
<p>Report text dynamically including the penguin’s report species and island name, along with the year range over which the measurements were collected for this particular penguin species on a particular island.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="do">## `r species_name` penguins on `r island_name` island</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>The following table lists the body mass, bill and flipper measurements</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>taken<span class="sc">&lt;</span>br<span class="sc">/</span><span class="er">&gt;</span> on <span class="st">`</span><span class="at">r nrow(penguin_data)</span><span class="st">`</span> <span class="st">`</span><span class="at">r species_name</span><span class="st">`</span> penguins living on</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">r island_name</span><span class="st">`</span> island between <span class="st">`</span><span class="at">r min(pull(penguin_data, year))</span><span class="st">`</span> and</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">r max(pull(penguin_data, year))</span><span class="st">`</span>.<span class="sc">&lt;</span>br<span class="sc">/</span><span class="er">&gt;</span> Penguins with missing</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>measurements are not included.</span></code></pre></div>
</div>
<div id="table-template" class="section level3">
<h3 class="hasAnchor">
<a href="#table-template" class="anchor"></a>Table template</h3>
<p>Report’s table template within a table_measurements function.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' @title</span>
<span class="co">#' Table of penguin measurements</span>
<span class="co">#' </span>
<span class="co">#' @description</span>
<span class="co">#' Table template of penguin measurements for a penguin species on one of the</span>
<span class="co">#' islands.</span>
<span class="co">#'</span>
<span class="co">#' @param data A tibble containing the penguin species name, island name and</span>
<span class="co">#'  measurements.</span>
<span class="co">#'</span>
<span class="co">#' @return A gt object containing the table of penguin measurements for a </span>
<span class="co">#' particular penguin species on a particular island.</span>
<span class="va">table_measurements</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">{</span>
  <span class="va">data</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html">tab_header</a></span><span class="op">(</span>title <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/md.html">md</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"**{species_name} penguins**"</span><span class="op">)</span><span class="op">)</span>,
               subtitle <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"{island_name} island"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://gt.rstudio.com/reference/cols_label.html">cols_label</a></span><span class="op">(</span>
      sex <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/html.html">html</a></span><span class="op">(</span><span class="st">"Sex&lt;br/&gt;&lt;br/&gt;"</span><span class="op">)</span>,
      body_mass_g <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/html.html">html</a></span><span class="op">(</span><span class="st">"Body mass&lt;br/&gt;grams"</span><span class="op">)</span>,
      bill_length_mm <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/html.html">html</a></span><span class="op">(</span><span class="st">"Bill length&lt;br/&gt;mm"</span><span class="op">)</span>,
      bill_depth_mm <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/html.html">html</a></span><span class="op">(</span><span class="st">"Bill depth&lt;br/&gt;mm"</span><span class="op">)</span>,
      flipper_length_mm <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/html.html">html</a></span><span class="op">(</span><span class="st">"Flipper length&lt;br/&gt;mm"</span><span class="op">)</span>,
    <span class="op">)</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://gt.rstudio.com/reference/cols_align.html">cols_align</a></span><span class="op">(</span>
      align <span class="op">=</span> <span class="st">"left"</span>,
      columns <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span>
    <span class="op">)</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://gt.rstudio.com/reference/tab_options.html">tab_options</a></span><span class="op">(</span>
      heading.background.color <span class="op">=</span> <span class="st">"#2C3E50"</span>,
      column_labels.font.weight <span class="op">=</span> <span class="st">"bold"</span>,
      table.align <span class="op">=</span> <span class="st">"left"</span>,
      table.width <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/pct.html">pct</a></span><span class="op">(</span><span class="fl">50</span><span class="op">)</span>,
      table.font.size <span class="op">=</span> <span class="st">"smaller"</span>,
      data_row.padding <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/px.html">px</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>
    <span class="op">)</span>
<span class="op">}</span></code></pre></div>
</div>
<div id="child-chunk-r-markdown-code" class="section level3">
<h3 class="hasAnchor">
<a href="#child-chunk-r-markdown-code" class="anchor"></a>Child chunk R Markdown code</h3>
<p>Dynamically create a R Markdown code chunk to call the table measurements function, creating a table of penguin measurements for a particular year. The R Markdown chunk is created dynamically using the <strong>knitr::knit_child</strong> function.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' @title</span>
<span class="co">#' Table of yearly penguin measurements</span>
<span class="co">#' </span>
<span class="co">#' @description</span>
<span class="co">#' Table template of penguin measurements for a penguin species on one of the</span>
<span class="co">#' islands, over a particular year.</span>
<span class="co">#'</span>
<span class="co">#' @seealso</span>
<span class="co">#' https://bookdown.org/yihui/rmarkdown-cookbook/child-document.html</span>
<span class="co">#'</span>
<span class="co">#' @param year_value The particular year as an integer for the penguin measurement.</span>
<span class="co">#'</span>
<span class="co">#' @return A knitr chunk containing the R Markdown to create the penguin </span>
<span class="co">#' measurements table for a particular year.</span>
<span class="va">table_measurements_year</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">year_value</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/knit_child.html">knit_child</a></span><span class="op">(</span>text <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
    <span class="st">'#### **Penguin measurements taken during `r year_value`**'</span>,
    <span class="st">''</span>,
    <span class="st">'```{r}'</span>,
    <span class="st">'penguin_data_year &lt;- penguin_data %&gt;%'</span>,
    <span class="st">'   filter(year == year_value) %&gt;%'</span>,
    <span class="st">'   select(-year)'</span>,
    <span class="st">''</span>,
    <span class="st">'penguin_data_year %&gt;% '</span>,
    <span class="st">'   table_measurements()'</span>,
    <span class="st">'```'</span>,
    <span class="st">'&lt;br/&gt;'</span>,
    <span class="st">''</span>
  <span class="op">)</span>, envir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/environment.html">environment</a></span><span class="op">(</span><span class="op">)</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
</div>
<div id="child-table" class="section level3">
<h3 class="hasAnchor">
<a href="#child-table" class="anchor"></a>Child table</h3>
<p>Create a table of penguin measurements one for each year within the report.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tables</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">year_value</span>, <span class="va">table_measurements_year</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="va">tables</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">'\n'</span><span class="op">)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Graham French.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
