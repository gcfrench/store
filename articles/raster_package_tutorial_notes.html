<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Raster package tutorial notes â€¢ store</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Raster package tutorial notes">
<meta property="og:description" content="store">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">store</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    information
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/create_update_package_information.html">Create and update a package</a>
    </li>
    <li>
      <a href="../articles/raster_package_tutorial_notes.html">Raster package tutorial notes</a>
    </li>
    <li>
      <a href="../articles/postgres_database_notes.html">PostgreSQL database notes</a>
    </li>
    <li>
      <a href="../articles/validation_checks.html">Run validation checks</a>
    </li>
    <li>
      <a href="../articles/gdal_commands.html">GDAL commands</a>
    </li>
    <li>
      <a href="../articles/docker_notes.html">Docker notes</a>
    </li>
    <li>
      <a href="../articles/git_notes.html">Git and GitHub notes</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    reporting
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/create_multiple_reports_sections_notes.html">Create multiple reports and sections</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">lookups and functions</a>
</li>
<li>
  <a href="../news/index.html">versions</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://twitter.com/gcfrench">
    <span class="fab fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/gcfrench/store">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="raster_package_tutorial_notes_files/header-attrs-2.8/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Raster package tutorial notes</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gcfrench/store/blob/master/vignettes/raster_package_tutorial_notes.Rmd"><code>vignettes/raster_package_tutorial_notes.Rmd</code></a></small>
      <div class="hidden name"><code>raster_package_tutorial_notes.Rmd</code></div>

    </div>

    
    
<p><strong>Tutorials taken from <a href="https://rspatial.org/raster/pkg/index.html">The Raster package by Robert J. Hijmans</a></strong></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/message.html">suppressPackageStartupMessages</a></span><span class="op">(</span><span class="op">{</span>
  <span class="co"># reading, writing, manipulating, analyzing and modeling of gridded spatial data</span>
  <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster">raster</a></span><span class="op">)</span>
  <span class="co"># simple features spatial vector data</span>
  <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/">sf</a></span><span class="op">)</span>
  <span class="co"># creating graphics based on Grammar of Graphics</span>
  <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>
<span class="co"># represent large satellite image collections as regular raster data cubes with </span>
<span class="co"># dimensions bands, time, y and x</span>
<span class="co"># library(gdalcubes)</span>
<span class="co"># reading, manipulating, plotting and writing spatiotemporal data array cubes</span>
<span class="co"># library(stars)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/rasterOptions.html">rasterOptions</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; format        : raster </span>
<span class="co">#&gt; datatype      : FLT4S </span>
<span class="co">#&gt; overwrite     : FALSE </span>
<span class="co">#&gt; progress      : none </span>
<span class="co">#&gt; timer         : FALSE </span>
<span class="co">#&gt; chunksize     : 1e+08 </span>
<span class="co">#&gt; maxmemory     : 5e+09 </span>
<span class="co">#&gt; memfrac       : 0.6 </span>
<span class="co">#&gt; tmpdir        : C:\Users\GRAHAM~1\AppData\Local\Temp\Rtmp0oXLAb/raster/ </span>
<span class="co">#&gt; tmptime       : 168 </span>
<span class="co">#&gt; setfileext    : TRUE </span>
<span class="co">#&gt; tolerance     : 0.1 </span>
<span class="co">#&gt; standardnames : TRUE </span>
<span class="co">#&gt; warn depracat.: TRUE </span>
<span class="co">#&gt; header        : none</span></code></pre></div>
<ul>
<li><p>default options can be changed using raster::rasterOptions</p></li>
<li><p>raster files can also be imported using the raster::raster function</p></li>
<li><p>the values associated with the RasterLayer are lost if you change the number of rows or columns or cell resolution, but not if the extent is changed as this does not change the number of cells, only the cell resolution</p></li>
<li><p>cells numbered by row from upper left to bottom right of the raster</p></li>
</ul>
<div id="raster-layer" class="section level1">
<h1 class="hasAnchor">
<a href="#raster-layer" class="anchor"></a>Raster layer</h1>
<div id="create-raster" class="section level2">
<h2 class="hasAnchor">
<a href="#create-raster" class="anchor"></a>create raster</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">r1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html">raster</a></span><span class="op">(</span>ncol <span class="op">=</span> <span class="fl">10</span>, nrow <span class="op">=</span> <span class="fl">10</span>, xmn <span class="op">=</span> <span class="fl">0</span>, xmx <span class="op">=</span> <span class="fl">1000</span>, ymn <span class="op">=</span> <span class="fl">0</span>, ymx <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span>
<span class="va">r1</span>
<span class="co">#&gt; class      : RasterLayer </span>
<span class="co">#&gt; dimensions : 10, 10, 100  (nrow, ncol, ncell)</span>
<span class="co">#&gt; resolution : 100, 100  (x, y)</span>
<span class="co">#&gt; extent     : 0, 1000, 0, 1000  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; crs        : NA</span>

<span class="co">#change resolution</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/resolution.html">res</a></span><span class="op">(</span><span class="va">r1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">200</span>
<span class="va">r1</span>
<span class="co">#&gt; class      : RasterLayer </span>
<span class="co">#&gt; dimensions : 5, 5, 25  (nrow, ncol, ncell)</span>
<span class="co">#&gt; resolution : 200, 200  (x, y)</span>
<span class="co">#&gt; extent     : 0, 1000, 0, 1000  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; crs        : NA</span>

<span class="co"># change number of rows and columns</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html">ncol</a></span><span class="op">(</span><span class="va">r1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">10</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html">nrow</a></span><span class="op">(</span><span class="va">r1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">10</span>
<span class="va">r1</span>
<span class="co">#&gt; class      : RasterLayer </span>
<span class="co">#&gt; dimensions : 10, 10, 100  (nrow, ncol, ncell)</span>
<span class="co">#&gt; resolution : 100, 100  (x, y)</span>
<span class="co">#&gt; extent     : 0, 1000, 0, 1000  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; crs        : NA</span>

<span class="co"># set coordinate reference system</span>
<span class="fu"><a href="../reference/projection.html">projection</a></span><span class="op">(</span><span class="va">r1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"+proj=utm +zone=48 +datum=WGS84"</span>
<span class="va">r1</span>
<span class="co">#&gt; class      : RasterLayer </span>
<span class="co">#&gt; dimensions : 10, 10, 100  (nrow, ncol, ncell)</span>
<span class="co">#&gt; resolution : 100, 100  (x, y)</span>
<span class="co">#&gt; extent     : 0, 1000, 0, 1000  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; crs        : +proj=utm +zone=48 +datum=WGS84 +units=m +no_defs</span>

<span class="co"># add cell values</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html">values</a></span><span class="op">(</span><span class="va">r1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html">ncell</a></span><span class="op">(</span><span class="va">r1</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">r1</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span>
<span class="co">#&gt;  [1,]    1    2    3    4    5    6    7    8    9    10</span>
<span class="co">#&gt;  [2,]   11   12   13   14   15   16   17   18   19    20</span>
<span class="co">#&gt;  [3,]   21   22   23   24   25   26   27   28   29    30</span>
<span class="co">#&gt;  [4,]   31   32   33   34   35   36   37   38   39    40</span>
<span class="co">#&gt;  [5,]   41   42   43   44   45   46   47   48   49    50</span>
<span class="co">#&gt;  [6,]   51   52   53   54   55   56   57   58   59    60</span>
<span class="co">#&gt;  [7,]   61   62   63   64   65   66   67   68   69    70</span>
<span class="co">#&gt;  [8,]   71   72   73   74   75   76   77   78   79    80</span>
<span class="co">#&gt;  [9,]   81   82   83   84   85   86   87   88   89    90</span>
<span class="co">#&gt; [10,]   91   92   93   94   95   96   97   98   99   100</span>
<span class="va">r1</span>
<span class="co">#&gt; class      : RasterLayer </span>
<span class="co">#&gt; dimensions : 10, 10, 100  (nrow, ncol, ncell)</span>
<span class="co">#&gt; resolution : 100, 100  (x, y)</span>
<span class="co">#&gt; extent     : 0, 1000, 0, 1000  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; crs        : +proj=utm +zone=48 +datum=WGS84 +units=m +no_defs </span>
<span class="co">#&gt; source     : memory</span>
<span class="co">#&gt; names      : layer </span>
<span class="co">#&gt; values     : 1, 100  (min, max)</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">r1</span>, main <span class="op">=</span> <span class="st">'Raster with 100 cells'</span><span class="op">)</span></code></pre></div>
<p><img src="raster_package_tutorial_notes_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
</div>
<div id="freq" class="section level2">
<h2 class="hasAnchor">
<a href="#freq" class="anchor"></a>freq</h2>
<ul>
<li>get the counts of each cell value</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/freq.html">freq</a></span><span class="op">(</span><span class="va">r1</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span>
<span class="co">#&gt;      value count</span>
<span class="co">#&gt; [1,]     1     1</span>
<span class="co">#&gt; [2,]     2     1</span>
<span class="co">#&gt; [3,]     3     1</span>
<span class="co">#&gt; [4,]     4     1</span>
<span class="co">#&gt; [5,]     5     1</span></code></pre></div>
</div>
<div id="projectextent" class="section level2">
<h2 class="hasAnchor">
<a href="#projectextent" class="anchor"></a>projectExtent</h2>
<ul>
<li>Create an empty raster copy with no values</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/projectRaster.html">projectExtent</a></span><span class="op">(</span><span class="va">r1</span>, crs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/projection.html">crs</a></span><span class="op">(</span><span class="va">r1</span><span class="op">)</span><span class="op">)</span>
<span class="va">r</span>
<span class="co">#&gt; class      : RasterLayer </span>
<span class="co">#&gt; dimensions : 10, 10, 100  (nrow, ncol, ncell)</span>
<span class="co">#&gt; resolution : 100, 100  (x, y)</span>
<span class="co">#&gt; extent     : 0, 1000, 0, 1000  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; crs        : +proj=utm +zone=48 +datum=WGS84 +units=m +no_defs</span></code></pre></div>
</div>
<div id="explore-raster-cells" class="section level2">
<h2 class="hasAnchor">
<a href="#explore-raster-cells" class="anchor"></a>Explore raster cells</h2>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">r1</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span>
<span class="co">#&gt;  [1,]    1    2    3    4    5    6    7    8    9    10</span>
<span class="co">#&gt;  [2,]   11   12   13   14   15   16   17   18   19    20</span>
<span class="co">#&gt;  [3,]   21   22   23   24   25   26   27   28   29    30</span>
<span class="co">#&gt;  [4,]   31   32   33   34   35   36   37   38   39    40</span>
<span class="co">#&gt;  [5,]   41   42   43   44   45   46   47   48   49    50</span>
<span class="co">#&gt;  [6,]   51   52   53   54   55   56   57   58   59    60</span>
<span class="co">#&gt;  [7,]   61   62   63   64   65   66   67   68   69    70</span>
<span class="co">#&gt;  [8,]   71   72   73   74   75   76   77   78   79    80</span>
<span class="co">#&gt;  [9,]   81   82   83   84   85   86   87   88   89    90</span>
<span class="co">#&gt; [10,]   91   92   93   94   95   96   97   98   99   100</span>

<span class="co"># check if raster has values</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/datasource.html">hasValues</a></span><span class="op">(</span><span class="va">r1</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE</span>

<span class="co"># check if raster values stored in memory</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/datasource.html">inMemory</a></span><span class="op">(</span><span class="va">r1</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE</span>

<span class="co"># dimensions</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/dimensions.html">dim</a></span><span class="op">(</span><span class="va">r1</span><span class="op">)</span>
<span class="co">#&gt; [1] 10 10  1</span>

<span class="co"># number of columns</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html">ncol</a></span><span class="op">(</span><span class="va">r1</span><span class="op">)</span>
<span class="co">#&gt; [1] 10</span>

<span class="co"># number of rows</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/ncell.html">nrow</a></span><span class="op">(</span><span class="va">r1</span><span class="op">)</span>
<span class="co">#&gt; [1] 10</span>

<span class="co"># which row contains the cell number</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/rowFromCell.html">rowFromCell</a></span><span class="op">(</span><span class="va">r1</span>, <span class="fl">45</span><span class="op">)</span>
<span class="co">#&gt; [1] 5</span>

<span class="co"># which column contains the cell number</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/rowFromCell.html">colFromCell</a></span><span class="op">(</span><span class="va">r1</span>, <span class="fl">45</span><span class="op">)</span>
<span class="co">#&gt; [1] 5</span>

<span class="co"># what are the x and y coordinates for cell number</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/xyFromCell.html">xyFromCell</a></span><span class="op">(</span><span class="va">r1</span>, <span class="fl">45</span><span class="op">)</span>
<span class="co">#&gt;        x   y</span>
<span class="co">#&gt; [1,] 450 550</span>

<span class="co"># what cell number is at coordinates x and y</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/cellFrom.html">cellFromXY</a></span><span class="op">(</span><span class="va">r1</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">450</span>, <span class="fl">550</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] 45</span>

<span class="co"># what column number is at coordinate x</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/cellFrom.html">colFromX</a></span><span class="op">(</span><span class="va">r1</span>, <span class="fl">450</span><span class="op">)</span>
<span class="co">#&gt; [1] 5</span>

<span class="co"># what row number is at coordinate y</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/cellFrom.html">rowFromY</a></span><span class="op">(</span><span class="va">r1</span>, <span class="fl">550</span><span class="op">)</span>
<span class="co">#&gt; [1] 5</span></code></pre></div>
</div>
</div>
<div id="raster-stack" class="section level1">
<h1 class="hasAnchor">
<a href="#raster-stack" class="anchor"></a>Raster stack</h1>
<ul>
<li>A raster stack can be formed from multiple files or a few bands from a single file</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">r2</span> <span class="op">&lt;-</span> <span class="va">r3</span> <span class="op">&lt;-</span> <span class="va">r1</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html">values</a></span><span class="op">(</span><span class="va">r2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">101</span><span class="op">:</span><span class="fl">200</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">r2</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span>
<span class="co">#&gt;  [1,]  101  102  103  104  105  106  107  108  109   110</span>
<span class="co">#&gt;  [2,]  111  112  113  114  115  116  117  118  119   120</span>
<span class="co">#&gt;  [3,]  121  122  123  124  125  126  127  128  129   130</span>
<span class="co">#&gt;  [4,]  131  132  133  134  135  136  137  138  139   140</span>
<span class="co">#&gt;  [5,]  141  142  143  144  145  146  147  148  149   150</span>
<span class="co">#&gt;  [6,]  151  152  153  154  155  156  157  158  159   160</span>
<span class="co">#&gt;  [7,]  161  162  163  164  165  166  167  168  169   170</span>
<span class="co">#&gt;  [8,]  171  172  173  174  175  176  177  178  179   180</span>
<span class="co">#&gt;  [9,]  181  182  183  184  185  186  187  188  189   190</span>
<span class="co">#&gt; [10,]  191  192  193  194  195  196  197  198  199   200</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html">values</a></span><span class="op">(</span><span class="va">r3</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">201</span><span class="op">:</span><span class="fl">300</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">r3</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span>
<span class="co">#&gt;  [1,]  201  202  203  204  205  206  207  208  209   210</span>
<span class="co">#&gt;  [2,]  211  212  213  214  215  216  217  218  219   220</span>
<span class="co">#&gt;  [3,]  221  222  223  224  225  226  227  228  229   230</span>
<span class="co">#&gt;  [4,]  231  232  233  234  235  236  237  238  239   240</span>
<span class="co">#&gt;  [5,]  241  242  243  244  245  246  247  248  249   250</span>
<span class="co">#&gt;  [6,]  251  252  253  254  255  256  257  258  259   260</span>
<span class="co">#&gt;  [7,]  261  262  263  264  265  266  267  268  269   270</span>
<span class="co">#&gt;  [8,]  271  272  273  274  275  276  277  278  279   280</span>
<span class="co">#&gt;  [9,]  281  282  283  284  285  286  287  288  289   290</span>
<span class="co">#&gt; [10,]  291  292  293  294  295  296  297  298  299   300</span>

<span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/stack.html">stack</a></span><span class="op">(</span><span class="va">r1</span>, <span class="va">r2</span>, <span class="va">r3</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/nlayers.html">nlayers</a></span><span class="op">(</span><span class="va">s</span><span class="op">)</span>
<span class="co">#&gt; [1] 3</span>
<span class="va">s</span>
<span class="co">#&gt; class      : RasterStack </span>
<span class="co">#&gt; dimensions : 10, 10, 100, 3  (nrow, ncol, ncell, nlayers)</span>
<span class="co">#&gt; resolution : 100, 100  (x, y)</span>
<span class="co">#&gt; extent     : 0, 1000, 0, 1000  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; crs        : +proj=utm +zone=48 +datum=WGS84 +units=m +no_defs </span>
<span class="co">#&gt; names      : layer.1, layer.2, layer.3 </span>
<span class="co">#&gt; min values :       1,     101,     201 </span>
<span class="co">#&gt; max values :     100,     200,     300</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">s</span><span class="op">)</span></code></pre></div>
<p><img src="raster_package_tutorial_notes_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<div id="subset" class="section level2">
<h2 class="hasAnchor">
<a href="#subset" class="anchor"></a>subset</h2>
<ul>
<li>extracts a raster layer from a raster stack</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/subset.html">subset</a></span><span class="op">(</span><span class="va">s</span>, <span class="fl">1</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span>
<span class="co">#&gt;  [1,]    1    2    3    4    5    6    7    8    9    10</span>
<span class="co">#&gt;  [2,]   11   12   13   14   15   16   17   18   19    20</span>
<span class="co">#&gt;  [3,]   21   22   23   24   25   26   27   28   29    30</span>
<span class="co">#&gt;  [4,]   31   32   33   34   35   36   37   38   39    40</span>
<span class="co">#&gt;  [5,]   41   42   43   44   45   46   47   48   49    50</span>
<span class="co">#&gt;  [6,]   51   52   53   54   55   56   57   58   59    60</span>
<span class="co">#&gt;  [7,]   61   62   63   64   65   66   67   68   69    70</span>
<span class="co">#&gt;  [8,]   71   72   73   74   75   76   77   78   79    80</span>
<span class="co">#&gt;  [9,]   81   82   83   84   85   86   87   88   89    90</span>
<span class="co">#&gt; [10,]   91   92   93   94   95   96   97   98   99   100</span></code></pre></div>
</div>
</div>
<div id="raster-brick" class="section level1">
<h1 class="hasAnchor">
<a href="#raster-brick" class="anchor"></a>Raster brick</h1>
<ul>
<li><p>A raster brick can only be linked to a single multi-layer file</p></li>
<li><p>Can read a raster brick from file using raster::brick function</p></li>
</ul>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/brick.html">brick</a></span><span class="op">(</span><span class="va">r1</span>, <span class="va">r2</span>, <span class="va">r3</span><span class="op">)</span>
<span class="co"># b &lt;- brick(s)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/nlayers.html">nlayers</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span>
<span class="co">#&gt; [1] 3</span>
<span class="va">b</span>
<span class="co">#&gt; class      : RasterBrick </span>
<span class="co">#&gt; dimensions : 10, 10, 100, 3  (nrow, ncol, ncell, nlayers)</span>
<span class="co">#&gt; resolution : 100, 100  (x, y)</span>
<span class="co">#&gt; extent     : 0, 1000, 0, 1000  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; crs        : +proj=utm +zone=48 +datum=WGS84 +units=m +no_defs </span>
<span class="co">#&gt; source     : memory</span>
<span class="co">#&gt; names      : layer.1, layer.2, layer.3 </span>
<span class="co">#&gt; min values :       1,     101,     201 </span>
<span class="co">#&gt; max values :     100,     200,     300</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span></code></pre></div>
<p><img src="raster_package_tutorial_notes_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<ul>
<li>Can import a single raster layer directly from a multibanded raster, eg band 2 using raster::raster(filename, band = 2)</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Extract a raster layer from a raster brick</span>
<span class="va">r2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html">raster</a></span><span class="op">(</span><span class="va">b</span>, layer <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="va">r2</span>
<span class="co">#&gt; class      : RasterLayer </span>
<span class="co">#&gt; dimensions : 10, 10, 100  (nrow, ncol, ncell)</span>
<span class="co">#&gt; resolution : 100, 100  (x, y)</span>
<span class="co">#&gt; extent     : 0, 1000, 0, 1000  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; crs        : +proj=utm +zone=48 +datum=WGS84 +units=m +no_defs </span>
<span class="co">#&gt; source     : memory</span>
<span class="co">#&gt; names      : layer.2 </span>
<span class="co">#&gt; values     : 101, 200  (min, max)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">r2</span><span class="op">)</span></code></pre></div>
<p><img src="raster_package_tutorial_notes_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
</div>
<div id="vector-to-raster-layer" class="section level1">
<h1 class="hasAnchor">
<a href="#vector-to-raster-layer" class="anchor"></a>Vector to Raster layer</h1>
<div id="rasterize" class="section level2">
<h2 class="hasAnchor">
<a href="#rasterize" class="anchor"></a>rasterize</h2>
<ul>
<li><p>converts points, lines or polygons attribute values to raster cells. For polygons values transferred if polygon covers centre of raster cell, for line to all raster cells touched by line and for points within a raster cell. Select values to transfer to defined raster object. Resulting multiple raster values are summarised by applied function, eg min</p></li>
<li><p>fasterize package can be used as a quicker method to rasterize polygons provided as sf objects</p></li>
</ul>
</div>
<div id="extract-cell-values" class="section level2">
<h2 class="hasAnchor">
<a href="#extract-cell-values" class="anchor"></a>Extract cell values</h2>
<ul>
<li>extracts subset of raster using matrix indexing and drop = FALSE. Less efficient than accessing values by raster::getValues function</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">r</span> <span class="op">&lt;-</span> <span class="va">r1</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">]</span> <span class="co"># row number, column number</span>
<span class="va">r</span>
<span class="co">#&gt; class      : RasterLayer </span>
<span class="co">#&gt; dimensions : 3, 3, 9  (nrow, ncol, ncell)</span>
<span class="co">#&gt; resolution : 100, 100  (x, y)</span>
<span class="co">#&gt; extent     : 0, 300, 700, 1000  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; crs        : +proj=utm +zone=48 +datum=WGS84 +units=m +no_defs </span>
<span class="co">#&gt; source     : memory</span>
<span class="co">#&gt; names      : layer </span>
<span class="co">#&gt; values     : 1, 23  (min, max)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>
<span class="co">#&gt;      [,1] [,2] [,3]</span>
<span class="co">#&gt; [1,]    1    2    3</span>
<span class="co">#&gt; [2,]   11   12   13</span>
<span class="co">#&gt; [3,]   21   22   23</span></code></pre></div>
</div>
<div id="extract" class="section level2">
<h2 class="hasAnchor">
<a href="#extract" class="anchor"></a>extract</h2>
<ul>
<li>extract cell values using polygons or lines where polygon covers centre of cell or line crosses cell. If use weights = TRUE then also outputs percentage of each cell covered by polygon and can apply summary function</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/extract.html">extract</a></span><span class="op">(</span><span class="va">r1</span>, y <span class="op">=</span> <span class="fl">12</span><span class="op">)</span> <span class="co"># what cell value occurs at cell number(s)</span>
<span class="co">#&gt; [1] 12</span>
<span class="co"># extract(r1, y = sf object, weights = TRUE) # polygon or line vector</span></code></pre></div>
</div>
<div id="getvalues" class="section level2">
<h2 class="hasAnchor">
<a href="#getvalues" class="anchor"></a>getValues</h2>
<ul>
<li>get all values for a single row</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get cell values from row number</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html">getValues</a></span><span class="op">(</span><span class="va">r1</span>, <span class="fl">5</span><span class="op">)</span>
<span class="co">#&gt;  [1] 41 42 43 44 45 46 47 48 49 50</span></code></pre></div>
</div>
<div id="getvaluesblock" class="section level2">
<h2 class="hasAnchor">
<a href="#getvaluesblock" class="anchor"></a>getValuesBlock</h2>
<ul>
<li>get all values for a block of cells</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">r1</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span>
<span class="co">#&gt;  [1,]    1    2    3    4    5    6    7    8    9    10</span>
<span class="co">#&gt;  [2,]   11   12   13   14   15   16   17   18   19    20</span>
<span class="co">#&gt;  [3,]   21   22   23   24   25   26   27   28   29    30</span>
<span class="co">#&gt;  [4,]   31   32   33   34   35   36   37   38   39    40</span>
<span class="co">#&gt;  [5,]   41   42   43   44   45   46   47   48   49    50</span>
<span class="co">#&gt;  [6,]   51   52   53   54   55   56   57   58   59    60</span>
<span class="co">#&gt;  [7,]   61   62   63   64   65   66   67   68   69    70</span>
<span class="co">#&gt;  [8,]   71   72   73   74   75   76   77   78   79    80</span>
<span class="co">#&gt;  [9,]   81   82   83   84   85   86   87   88   89    90</span>
<span class="co">#&gt; [10,]   91   92   93   94   95   96   97   98   99   100</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValuesBlock.html">getValuesBlock</a></span><span class="op">(</span><span class="va">r1</span>, row <span class="op">=</span> <span class="fl">4</span>, nrows <span class="op">=</span> <span class="fl">3</span>, col <span class="op">=</span> <span class="fl">4</span>, ncols <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt; [1] 34 35 36 44 45 46 54 55 56</span></code></pre></div>
</div>
</div>
<div id="summarise-cell-values" class="section level1">
<h1 class="hasAnchor">
<a href="#summarise-cell-values" class="anchor"></a>Summarise cell values</h1>
<div id="cellstats" class="section level2">
<h2 class="hasAnchor">
<a href="#cellstats" class="anchor"></a>cellStats</h2>
<ul>
<li>summary statistic of cell values</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># apply summary function within each raster layer in a raster stack</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/cellStats.html">cellStats</a></span><span class="op">(</span><span class="va">r1</span>, <span class="va">sum</span><span class="op">)</span>
<span class="co">#&gt; [1] 5050</span></code></pre></div>
</div>
<div id="frequency" class="section level2">
<h2 class="hasAnchor">
<a href="#frequency" class="anchor"></a>frequency</h2>
<ul>
<li>frequency table of cell values</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html">raster</a></span><span class="op">(</span>ncols <span class="op">=</span> <span class="fl">10</span>, nrows <span class="op">=</span> <span class="fl">10</span>, vals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/freq.html">freq</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>
<span class="co">#&gt;      value count</span>
<span class="co">#&gt; [1,]     0    53</span>
<span class="co">#&gt; [2,]     1    47</span></code></pre></div>
</div>
<div id="zonal" class="section level2">
<h2 class="hasAnchor">
<a href="#zonal" class="anchor"></a>zonal</h2>
<ul>
<li>calculate zonal statistics summarising cell values for each zone defined by a raster layer</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/projectRaster.html">projectExtent</a></span><span class="op">(</span><span class="va">r1</span>, crs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/projection.html">crs</a></span><span class="op">(</span><span class="va">r1</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html">values</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span>
<span class="co">#&gt;  [1,]    1    2    3    4    5    6    7    8    9    10</span>
<span class="co">#&gt;  [2,]    1    2    3    4    5    6    7    8    9    10</span>
<span class="co">#&gt;  [3,]    1    2    3    4    5    6    7    8    9    10</span>
<span class="co">#&gt;  [4,]    1    2    3    4    5    6    7    8    9    10</span>
<span class="co">#&gt;  [5,]    1    2    3    4    5    6    7    8    9    10</span>
<span class="co">#&gt;  [6,]    1    2    3    4    5    6    7    8    9    10</span>
<span class="co">#&gt;  [7,]    1    2    3    4    5    6    7    8    9    10</span>
<span class="co">#&gt;  [8,]    1    2    3    4    5    6    7    8    9    10</span>
<span class="co">#&gt;  [9,]    1    2    3    4    5    6    7    8    9    10</span>
<span class="co">#&gt; [10,]    1    2    3    4    5    6    7    8    9    10</span>
<span class="va">rz</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/zonal.html">zonal</a></span><span class="op">(</span><span class="va">r1</span>, <span class="va">r</span>, fun <span class="op">=</span> <span class="st">'max'</span><span class="op">)</span>
<span class="va">rz</span>
<span class="co">#&gt;       zone max</span>
<span class="co">#&gt;  [1,]    1  91</span>
<span class="co">#&gt;  [2,]    2  92</span>
<span class="co">#&gt;  [3,]    3  93</span>
<span class="co">#&gt;  [4,]    4  94</span>
<span class="co">#&gt;  [5,]    5  95</span>
<span class="co">#&gt;  [6,]    6  96</span>
<span class="co">#&gt;  [7,]    7  97</span>
<span class="co">#&gt;  [8,]    8  98</span>
<span class="co">#&gt;  [9,]    9  99</span>
<span class="co">#&gt; [10,]   10 100</span></code></pre></div>
</div>
<div id="crosstab" class="section level2">
<h2 class="hasAnchor">
<a href="#crosstab" class="anchor"></a>crosstab</h2>
<ul>
<li>cross-tabulate 2 raster layers or multiple layers in a raster stack or brick to create a contingency table</li>
</ul>
</div>
</div>
<div id="modify-raster-values" class="section level1">
<h1 class="hasAnchor">
<a href="#modify-raster-values" class="anchor"></a>Modify raster values</h1>
<div id="calc" class="section level2">
<h2 class="hasAnchor">
<a href="#calc" class="anchor"></a>calc</h2>
<ul>
<li>calculate values from a raster layer</li>
</ul>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">r</span> <span class="op">&lt;-</span> <span class="va">r1</span> <span class="op">*</span> <span class="fl">2</span>
<span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/calc.html">calc</a></span><span class="op">(</span><span class="va">r1</span>, fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span><span class="va">x</span> <span class="op">*</span> <span class="fl">2</span><span class="op">}</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span>
<span class="co">#&gt;  [1,]    2    4    6    8   10   12   14   16   18    20</span>
<span class="co">#&gt;  [2,]   22   24   26   28   30   32   34   36   38    40</span>
<span class="co">#&gt;  [3,]   42   44   46   48   50   52   54   56   58    60</span>
<span class="co">#&gt;  [4,]   62   64   66   68   70   72   74   76   78    80</span>
<span class="co">#&gt;  [5,]   82   84   86   88   90   92   94   96   98   100</span>
<span class="co">#&gt;  [6,]  102  104  106  108  110  112  114  116  118   120</span>
<span class="co">#&gt;  [7,]  122  124  126  128  130  132  134  136  138   140</span>
<span class="co">#&gt;  [8,]  142  144  146  148  150  152  154  156  158   160</span>
<span class="co">#&gt;  [9,]  162  164  166  168  170  172  174  176  178   180</span>
<span class="co">#&gt; [10,]  182  184  186  188  190  192  194  196  198   200</span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">r</span> <span class="op">&lt;-</span> <span class="va">r1</span>
<span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">x</span><span class="op">[</span><span class="va">x</span> <span class="op">==</span> <span class="fl">5</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="op">}</span>
<span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/calc.html">calc</a></span><span class="op">(</span><span class="va">r</span>, <span class="va">f</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span>
<span class="co">#&gt;  [1,]    1    2    3    4   NA    6    7    8    9    10</span>
<span class="co">#&gt;  [2,]   11   12   13   14   15   16   17   18   19    20</span>
<span class="co">#&gt;  [3,]   21   22   23   24   25   26   27   28   29    30</span>
<span class="co">#&gt;  [4,]   31   32   33   34   35   36   37   38   39    40</span>
<span class="co">#&gt;  [5,]   41   42   43   44   45   46   47   48   49    50</span>
<span class="co">#&gt;  [6,]   51   52   53   54   55   56   57   58   59    60</span>
<span class="co">#&gt;  [7,]   61   62   63   64   65   66   67   68   69    70</span>
<span class="co">#&gt;  [8,]   71   72   73   74   75   76   77   78   79    80</span>
<span class="co">#&gt;  [9,]   81   82   83   84   85   86   87   88   89    90</span>
<span class="co">#&gt; [10,]   91   92   93   94   95   96   97   98   99   100</span></code></pre></div>
</div>
<div id="reclassify" class="section level2">
<h2 class="hasAnchor">
<a href="#reclassify" class="anchor"></a>reclassify</h2>
<ul>
<li>replace ranges of values with single values</li>
</ul>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/reclassify.html">reclassify</a></span><span class="op">(</span><span class="va">r1</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">2</span>, <span class="fl">20</span>, <span class="fl">30</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span>
<span class="co">#&gt;  [1,]    1    1    1    1    1    1    1    1    1     1</span>
<span class="co">#&gt;  [2,]    2    2    2    2    2    2    2    2    2     2</span>
<span class="co">#&gt;  [3,]    3    3    3    3    3    3    3    3    3     3</span>
<span class="co">#&gt;  [4,]   31   32   33   34   35   36   37   38   39    40</span>
<span class="co">#&gt;  [5,]   41   42   43   44   45   46   47   48   49    50</span>
<span class="co">#&gt;  [6,]   51   52   53   54   55   56   57   58   59    60</span>
<span class="co">#&gt;  [7,]   61   62   63   64   65   66   67   68   69    70</span>
<span class="co">#&gt;  [8,]   71   72   73   74   75   76   77   78   79    80</span>
<span class="co">#&gt;  [9,]   81   82   83   84   85   86   87   88   89    90</span>
<span class="co">#&gt; [10,]   91   92   93   94   95   96   97   98   99   100</span></code></pre></div>
</div>
<div id="subs" class="section level2">
<h2 class="hasAnchor">
<a href="#subs" class="anchor"></a>subs</h2>
<ul>
<li>replace single value with another value. subsWithNA = FALSE does not appear to work so that values that are not replaced are replaced with NA</li>
</ul>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/subs.html">subs</a></span><span class="op">(</span><span class="va">r1</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span><span class="op">)</span>, to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,
                         by <span class="op">=</span> <span class="st">'from'</span>,
                         which <span class="op">=</span> <span class="st">'to'</span>,
                         subsWithNA <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span>
<span class="co">#&gt;  [1,]   NA   NA   NA   NA   NA   NA   NA   NA   NA     1</span>
<span class="co">#&gt;  [2,]   NA   NA   NA   NA   NA   NA   NA   NA   NA     2</span>
<span class="co">#&gt;  [3,]   NA   NA   NA   NA   NA   NA   NA   NA   NA    NA</span>
<span class="co">#&gt;  [4,]   NA   NA   NA   NA   NA   NA   NA   NA   NA    NA</span>
<span class="co">#&gt;  [5,]   NA   NA   NA   NA   NA   NA   NA   NA   NA    NA</span>
<span class="co">#&gt;  [6,]   NA   NA   NA   NA   NA   NA   NA   NA   NA    NA</span>
<span class="co">#&gt;  [7,]   NA   NA   NA   NA   NA   NA   NA   NA   NA    NA</span>
<span class="co">#&gt;  [8,]   NA   NA   NA   NA   NA   NA   NA   NA   NA    NA</span>
<span class="co">#&gt;  [9,]   NA   NA   NA   NA   NA   NA   NA   NA   NA    NA</span>
<span class="co">#&gt; [10,]   NA   NA   NA   NA   NA   NA   NA   NA   NA    NA</span></code></pre></div>
</div>
<div id="focal" class="section level2">
<h2 class="hasAnchor">
<a href="#focal" class="anchor"></a>focal</h2>
<ul>
<li>uses values in a neighborhood of cells around a focal cell and computes a value that is stored in the focal cell, for example compute values for NA</li>
</ul>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html">raster</a></span><span class="op">(</span>ncols <span class="op">=</span> <span class="fl">20</span>, nrows <span class="op">=</span> <span class="fl">20</span>, vals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">400</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.7</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13]</span>
<span class="co">#&gt;  [1,]    1    0    1    0    0    0    0    0    0     1     0     0     1</span>
<span class="co">#&gt;  [2,]    0    0    1    0    0    0    0    1    0     0     1     1     0</span>
<span class="co">#&gt;  [3,]    0    1    1    0    1    0    0    0    0     0     0     0     0</span>
<span class="co">#&gt;  [4,]    0    0    0    0    0    0    0    0    0     0     1     0     1</span>
<span class="co">#&gt;  [5,]    0    0    0    1    0    0    1    0    1     0     1     1     0</span>
<span class="co">#&gt;  [6,]    0    0    1    1    0    0    1    0    1     0     0     1     0</span>
<span class="co">#&gt;  [7,]    0    1    0    0    1    0    1    1    0     0     0     0     0</span>
<span class="co">#&gt;  [8,]    0    1    1    0    0    1    0    0    0     0     1     0     0</span>
<span class="co">#&gt;  [9,]    0    0    0    0    0    1    0    0    0     0     0     0     1</span>
<span class="co">#&gt; [10,]    0    0    0    0    0    1    0    1    1     1     0     1     1</span>
<span class="co">#&gt; [11,]    0    0    0    0    0    0    0    0    0     0     1     0     1</span>
<span class="co">#&gt; [12,]    0    0    0    0    0    0    0    1    0     1     0     1     0</span>
<span class="co">#&gt; [13,]    0    0    0    0    0    0    1    0    0     0     1     1     0</span>
<span class="co">#&gt; [14,]    0    0    0    0    0    1    0    0    1     1     0     1     0</span>
<span class="co">#&gt; [15,]    0    1    1    0    0    1    1    0    0     1     1     0     0</span>
<span class="co">#&gt; [16,]    1    1    1    0    0    1    1    0    1     0     0     0     0</span>
<span class="co">#&gt; [17,]    0    0    1    0    0    0    0    0    0     0     0     0     0</span>
<span class="co">#&gt; [18,]    0    1    1    0    1    1    0    1    0     1     0     1     1</span>
<span class="co">#&gt; [19,]    1    0    0    1    0    0    1    0    0     0     1     1     0</span>
<span class="co">#&gt; [20,]    1    0    0    0    0    0    0    0    0     1     0     1     0</span>
<span class="co">#&gt;       [,14] [,15] [,16] [,17] [,18] [,19] [,20]</span>
<span class="co">#&gt;  [1,]     1     0     0     1     0     0     0</span>
<span class="co">#&gt;  [2,]     1     0     1     0     0     1     0</span>
<span class="co">#&gt;  [3,]     1     1     1     1     0     0     0</span>
<span class="co">#&gt;  [4,]     0     0     0     0     0     1     0</span>
<span class="co">#&gt;  [5,]     1     0     1     0     0     0     0</span>
<span class="co">#&gt;  [6,]     0     1     0     0     1     0     0</span>
<span class="co">#&gt;  [7,]     0     0     1     0     0     0     1</span>
<span class="co">#&gt;  [8,]     0     1     0     1     0     0     0</span>
<span class="co">#&gt;  [9,]     1     0     0     0     0     0     0</span>
<span class="co">#&gt; [10,]     0     0     0     0     1     1     0</span>
<span class="co">#&gt; [11,]     1     0     1     0     0     0     0</span>
<span class="co">#&gt; [12,]     0     0     1     0     0     0     0</span>
<span class="co">#&gt; [13,]     1     0     0     0     0     0     1</span>
<span class="co">#&gt; [14,]     0     0     0     0     0     0     1</span>
<span class="co">#&gt; [15,]     0     0     1     0     0     1     0</span>
<span class="co">#&gt; [16,]     1     0     1     0     0     0     0</span>
<span class="co">#&gt; [17,]     0     0     0     0     0     1     0</span>
<span class="co">#&gt; [18,]     1     0     0     0     0     0     0</span>
<span class="co">#&gt; [19,]     1     0     0     0     0     0     0</span>
<span class="co">#&gt; [20,]     1     0     0     0     0     1     0</span>
<span class="va">rc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/clump.html">clump</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>
<span class="co">#&gt; Loading required namespace: igraph</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">rc</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13]</span>
<span class="co">#&gt;  [1,]    1   NA    2   NA   NA   NA   NA   NA   NA     3    NA    NA     3</span>
<span class="co">#&gt;  [2,]   NA   NA    2   NA   NA   NA   NA    4   NA    NA     3     3    NA</span>
<span class="co">#&gt;  [3,]   NA    2    2   NA    6   NA   NA   NA   NA    NA    NA    NA    NA</span>
<span class="co">#&gt;  [4,]   NA   NA   NA   NA   NA   NA   NA   NA   NA    NA     3    NA     3</span>
<span class="co">#&gt;  [5,]   NA   NA   NA    8   NA   NA    8   NA    8    NA     3     3    NA</span>
<span class="co">#&gt;  [6,]   NA   NA    8    8   NA   NA    8   NA    8    NA    NA     3    NA</span>
<span class="co">#&gt;  [7,]   NA    8   NA   NA    8   NA    8    8   NA    NA    NA    NA    NA</span>
<span class="co">#&gt;  [8,]   NA    8    8   NA   NA    8   NA   NA   NA    NA    11    NA    NA</span>
<span class="co">#&gt;  [9,]   NA   NA   NA   NA   NA    8   NA   NA   NA    NA    NA    NA     3</span>
<span class="co">#&gt; [10,]   NA   NA   NA   NA   NA    8   NA    3    3     3    NA     3     3</span>
<span class="co">#&gt; [11,]   NA   NA   NA   NA   NA   NA   NA   NA   NA    NA     3    NA     3</span>
<span class="co">#&gt; [12,]   NA   NA   NA   NA   NA   NA   NA   14   NA     3    NA     3    NA</span>
<span class="co">#&gt; [13,]   NA   NA   NA   NA   NA   NA   14   NA   NA    NA     3     3    NA</span>
<span class="co">#&gt; [14,]   NA   NA   NA   NA   NA   14   NA   NA    3     3    NA     3    NA</span>
<span class="co">#&gt; [15,]   NA   17   17   NA   NA   14   14   NA   NA     3     3    NA    NA</span>
<span class="co">#&gt; [16,]   17   17   17   NA   NA   14   14   NA    3    NA    NA    NA    NA</span>
<span class="co">#&gt; [17,]   NA   NA   17   NA   NA   NA   NA   NA   NA    NA    NA    NA    NA</span>
<span class="co">#&gt; [18,]   NA   17   17   NA   17   17   NA   17   NA    21    NA    21    21</span>
<span class="co">#&gt; [19,]   17   NA   NA   17   NA   NA   17   NA   NA    NA    21    21    NA</span>
<span class="co">#&gt; [20,]   17   NA   NA   NA   NA   NA   NA   NA   NA    21    NA    21    NA</span>
<span class="co">#&gt;       [,14] [,15] [,16] [,17] [,18] [,19] [,20]</span>
<span class="co">#&gt;  [1,]     3    NA    NA     3    NA    NA    NA</span>
<span class="co">#&gt;  [2,]     3    NA     3    NA    NA     5    NA</span>
<span class="co">#&gt;  [3,]     3     3     3     3    NA    NA    NA</span>
<span class="co">#&gt;  [4,]    NA    NA    NA    NA    NA     7    NA</span>
<span class="co">#&gt;  [5,]     3    NA     3    NA    NA    NA    NA</span>
<span class="co">#&gt;  [6,]    NA     3    NA    NA     9    NA    NA</span>
<span class="co">#&gt;  [7,]    NA    NA     3    NA    NA    NA    10</span>
<span class="co">#&gt;  [8,]    NA     3    NA     3    NA    NA    NA</span>
<span class="co">#&gt;  [9,]     3    NA    NA    NA    NA    NA    NA</span>
<span class="co">#&gt; [10,]    NA    NA    NA    NA    12    12    NA</span>
<span class="co">#&gt; [11,]     3    NA    13    NA    NA    NA    NA</span>
<span class="co">#&gt; [12,]    NA    NA    13    NA    NA    NA    NA</span>
<span class="co">#&gt; [13,]    15    NA    NA    NA    NA    NA    16</span>
<span class="co">#&gt; [14,]    NA    NA    NA    NA    NA    NA    16</span>
<span class="co">#&gt; [15,]    NA    NA    18    NA    NA    16    NA</span>
<span class="co">#&gt; [16,]    19    NA    18    NA    NA    NA    NA</span>
<span class="co">#&gt; [17,]    NA    NA    NA    NA    NA    20    NA</span>
<span class="co">#&gt; [18,]    21    NA    NA    NA    NA    NA    NA</span>
<span class="co">#&gt; [19,]    21    NA    NA    NA    NA    NA    NA</span>
<span class="co">#&gt; [20,]    21    NA    NA    NA    NA    22    NA</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">rc</span><span class="op">)</span></code></pre></div>
<p><img src="raster_package_tutorial_notes_files/figure-html/unnamed-chunk-23-1.png" width="700"></p>
</div>
<div id="update" class="section level2">
<h2 class="hasAnchor">
<a href="#update" class="anchor"></a>update</h2>
<ul>
<li>can update values in an existing raster file using raster::update</li>
</ul>
</div>
</div>
<div id="modify-raster-extent" class="section level1">
<h1 class="hasAnchor">
<a href="#modify-raster-extent" class="anchor"></a>Modify raster extent</h1>
<div id="crop" class="section level2">
<h2 class="hasAnchor">
<a href="#crop" class="anchor"></a>crop</h2>
<ul>
<li>Take a geographic subset of a larger raster object, providing the extent directly, extracted from a spatial object or dynamically for raster plot using raster::drawExtent.</li>
</ul>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/crop.html">crop</a></span><span class="op">(</span><span class="va">r1</span>, <span class="fu"><a href="https://rdrr.io/pkg/raster/man/extent.html">extent</a></span><span class="op">(</span><span class="fl">300</span>, <span class="fl">700</span>, <span class="fl">300</span>, <span class="fl">700</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>
<span class="co">#&gt;      [,1] [,2] [,3] [,4]</span>
<span class="co">#&gt; [1,]   34   35   36   37</span>
<span class="co">#&gt; [2,]   44   45   46   47</span>
<span class="co">#&gt; [3,]   54   55   56   57</span>
<span class="co">#&gt; [4,]   64   65   66   67</span>
<span class="va">r</span>
<span class="co">#&gt; class      : RasterLayer </span>
<span class="co">#&gt; dimensions : 4, 4, 16  (nrow, ncol, ncell)</span>
<span class="co">#&gt; resolution : 100, 100  (x, y)</span>
<span class="co">#&gt; extent     : 300, 700, 300, 700  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; crs        : +proj=utm +zone=48 +datum=WGS84 +units=m +no_defs </span>
<span class="co">#&gt; source     : memory</span>
<span class="co">#&gt; names      : layer </span>
<span class="co">#&gt; values     : 34, 67  (min, max)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">r1</span>, legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">r</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="raster_package_tutorial_notes_files/figure-html/unnamed-chunk-24-1.png" width="700"></p>
</div>
<div id="extend" class="section level2">
<h2 class="hasAnchor">
<a href="#extend" class="anchor"></a>extend</h2>
<ul>
<li>Extends a raster layer by adding outer rows and columns containing NA values</li>
</ul>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/extend.html">extend</a></span><span class="op">(</span><span class="va">r</span>, <span class="fu"><a href="https://rdrr.io/pkg/raster/man/extent.html">extent</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1000</span>, <span class="fl">0</span>, <span class="fl">1000</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span>
<span class="co">#&gt;  [1,]   NA   NA   NA   NA   NA   NA   NA   NA   NA    NA</span>
<span class="co">#&gt;  [2,]   NA   NA   NA   NA   NA   NA   NA   NA   NA    NA</span>
<span class="co">#&gt;  [3,]   NA   NA   NA   NA   NA   NA   NA   NA   NA    NA</span>
<span class="co">#&gt;  [4,]   NA   NA   NA   34   35   36   37   NA   NA    NA</span>
<span class="co">#&gt;  [5,]   NA   NA   NA   44   45   46   47   NA   NA    NA</span>
<span class="co">#&gt;  [6,]   NA   NA   NA   54   55   56   57   NA   NA    NA</span>
<span class="co">#&gt;  [7,]   NA   NA   NA   64   65   66   67   NA   NA    NA</span>
<span class="co">#&gt;  [8,]   NA   NA   NA   NA   NA   NA   NA   NA   NA    NA</span>
<span class="co">#&gt;  [9,]   NA   NA   NA   NA   NA   NA   NA   NA   NA    NA</span>
<span class="co">#&gt; [10,]   NA   NA   NA   NA   NA   NA   NA   NA   NA    NA</span>
<span class="va">r</span>
<span class="co">#&gt; class      : RasterLayer </span>
<span class="co">#&gt; dimensions : 10, 10, 100  (nrow, ncol, ncell)</span>
<span class="co">#&gt; resolution : 100, 100  (x, y)</span>
<span class="co">#&gt; extent     : 0, 1000, 0, 1000  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; crs        : +proj=utm +zone=48 +datum=WGS84 +units=m +no_defs </span>
<span class="co">#&gt; source     : memory</span>
<span class="co">#&gt; names      : layer </span>
<span class="co">#&gt; values     : 34, 67  (min, max)</span></code></pre></div>
</div>
<div id="trim" class="section level2">
<h2 class="hasAnchor">
<a href="#trim" class="anchor"></a>trim</h2>
<ul>
<li>Crops a raster layer by removing outer rows and columns containing NA values</li>
</ul>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/trim.html">trim</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>
<span class="co">#&gt;      [,1] [,2] [,3] [,4]</span>
<span class="co">#&gt; [1,]   34   35   36   37</span>
<span class="co">#&gt; [2,]   44   45   46   47</span>
<span class="co">#&gt; [3,]   54   55   56   57</span>
<span class="co">#&gt; [4,]   64   65   66   67</span>
<span class="va">r</span>
<span class="co">#&gt; class      : RasterLayer </span>
<span class="co">#&gt; dimensions : 4, 4, 16  (nrow, ncol, ncell)</span>
<span class="co">#&gt; resolution : 100, 100  (x, y)</span>
<span class="co">#&gt; extent     : 300, 700, 300, 700  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; crs        : +proj=utm +zone=48 +datum=WGS84 +units=m +no_defs </span>
<span class="co">#&gt; source     : memory</span>
<span class="co">#&gt; names      : layer </span>
<span class="co">#&gt; values     : 34, 67  (min, max)</span></code></pre></div>
</div>
<div id="shift" class="section level2">
<h2 class="hasAnchor">
<a href="#shift" class="anchor"></a>shift</h2>
<ul>
<li>shifts the location of a raster layer either in the x or y direction</li>
</ul>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/shift.html">shift</a></span><span class="op">(</span><span class="va">r</span>, dx <span class="op">=</span> <span class="fl">200</span>, dy <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>
<span class="va">r</span>
<span class="co">#&gt; class      : RasterLayer </span>
<span class="co">#&gt; dimensions : 4, 4, 16  (nrow, ncol, ncell)</span>
<span class="co">#&gt; resolution : 100, 100  (x, y)</span>
<span class="co">#&gt; extent     : 500, 900, 500, 900  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; crs        : +proj=utm +zone=48 +datum=WGS84 +units=m +no_defs </span>
<span class="co">#&gt; source     : memory</span>
<span class="co">#&gt; names      : layer </span>
<span class="co">#&gt; values     : 34, 67  (min, max)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">r1</span>, legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">r</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="raster_package_tutorial_notes_files/figure-html/unnamed-chunk-27-1.png" width="700"></p>
</div>
</div>
<div id="modify-raster-resolution" class="section level1">
<h1 class="hasAnchor">
<a href="#modify-raster-resolution" class="anchor"></a>Modify raster resolution</h1>
<div id="aggregate" class="section level2">
<h2 class="hasAnchor">
<a href="#aggregate" class="anchor"></a>aggregate</h2>
<ul>
<li>Changes the cell resolution of a raster layer. Provide a function determining what to do with the grouped cell values (eg mean) when aggregating</li>
</ul>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/aggregate.html">aggregate</a></span><span class="op">(</span><span class="va">r1</span>, fact <span class="op">=</span> <span class="fl">2</span>, fun <span class="op">=</span> <span class="va">sum</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>
<span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5]</span>
<span class="co">#&gt; [1,]   26   34   42   50   58</span>
<span class="co">#&gt; [2,]  106  114  122  130  138</span>
<span class="co">#&gt; [3,]  186  194  202  210  218</span>
<span class="co">#&gt; [4,]  266  274  282  290  298</span>
<span class="co">#&gt; [5,]  346  354  362  370  378</span>
<span class="va">r</span>
<span class="co">#&gt; class      : RasterLayer </span>
<span class="co">#&gt; dimensions : 5, 5, 25  (nrow, ncol, ncell)</span>
<span class="co">#&gt; resolution : 200, 200  (x, y)</span>
<span class="co">#&gt; extent     : 0, 1000, 0, 1000  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; crs        : +proj=utm +zone=48 +datum=WGS84 +units=m +no_defs </span>
<span class="co">#&gt; source     : memory</span>
<span class="co">#&gt; names      : layer </span>
<span class="co">#&gt; values     : 26, 378  (min, max)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span></code></pre></div>
<p><img src="raster_package_tutorial_notes_files/figure-html/unnamed-chunk-28-1.png" width="700"></p>
</div>
<div id="disaggregate" class="section level2">
<h2 class="hasAnchor">
<a href="#disaggregate" class="anchor"></a>disaggregate</h2>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/disaggregate.html">disaggregate</a></span><span class="op">(</span><span class="va">r</span>, fact <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span>
<span class="co">#&gt;  [1,]   26   26   34   34   42   42   50   50   58    58</span>
<span class="co">#&gt;  [2,]   26   26   34   34   42   42   50   50   58    58</span>
<span class="co">#&gt;  [3,]  106  106  114  114  122  122  130  130  138   138</span>
<span class="co">#&gt;  [4,]  106  106  114  114  122  122  130  130  138   138</span>
<span class="co">#&gt;  [5,]  186  186  194  194  202  202  210  210  218   218</span>
<span class="co">#&gt;  [6,]  186  186  194  194  202  202  210  210  218   218</span>
<span class="co">#&gt;  [7,]  266  266  274  274  282  282  290  290  298   298</span>
<span class="co">#&gt;  [8,]  266  266  274  274  282  282  290  290  298   298</span>
<span class="co">#&gt;  [9,]  346  346  354  354  362  362  370  370  378   378</span>
<span class="co">#&gt; [10,]  346  346  354  354  362  362  370  370  378   378</span>
<span class="va">r</span>
<span class="co">#&gt; class      : RasterLayer </span>
<span class="co">#&gt; dimensions : 10, 10, 100  (nrow, ncol, ncell)</span>
<span class="co">#&gt; resolution : 100, 100  (x, y)</span>
<span class="co">#&gt; extent     : 0, 1000, 0, 1000  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; crs        : +proj=utm +zone=48 +datum=WGS84 +units=m +no_defs </span>
<span class="co">#&gt; source     : memory</span>
<span class="co">#&gt; names      : layer </span>
<span class="co">#&gt; values     : 26, 378  (min, max)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span></code></pre></div>
<p><img src="raster_package_tutorial_notes_files/figure-html/unnamed-chunk-29-1.png" width="700"></p>
</div>
</div>
<div id="modify-raster-projection" class="section level1">
<h1 class="hasAnchor">
<a href="#modify-raster-projection" class="anchor"></a>Modify raster projection</h1>
<div id="projectraster" class="section level2">
<h2 class="hasAnchor">
<a href="#projectraster" class="anchor"></a>projectRaster</h2>
<ul>
<li>transform values in a raster layer to a new raster layer with a different coordindate reference system</li>
</ul>
</div>
</div>
<div id="modify-between-raster-layers" class="section level1">
<h1 class="hasAnchor">
<a href="#modify-between-raster-layers" class="anchor"></a>Modify between raster layers</h1>
<div id="mask" class="section level2">
<h2 class="hasAnchor">
<a href="#mask" class="anchor"></a>mask</h2>
<ul>
<li>removes all values from one layer that are NA in another layer</li>
</ul>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># remove numbers divisible by 10</span>
<span class="co">## create masking raster with TRUE / FALSE values</span>
<span class="va">masking_raster</span> <span class="op">&lt;-</span> <span class="va">r1</span> <span class="op">%%</span> <span class="fl">10</span>
<span class="va">masking_raster</span> <span class="op">&lt;-</span> <span class="va">masking_raster</span> <span class="op">==</span> <span class="fl">0</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">masking_raster</span><span class="op">)</span>
<span class="co">#&gt;        [,1]  [,2]  [,3]  [,4]  [,5]  [,6]  [,7]  [,8]  [,9] [,10]</span>
<span class="co">#&gt;  [1,] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE</span>
<span class="co">#&gt;  [2,] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE</span>
<span class="co">#&gt;  [3,] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE</span>
<span class="co">#&gt;  [4,] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE</span>
<span class="co">#&gt;  [5,] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE</span>
<span class="co">#&gt;  [6,] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE</span>
<span class="co">#&gt;  [7,] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE</span>
<span class="co">#&gt;  [8,] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE</span>
<span class="co">#&gt;  [9,] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE</span>
<span class="co">#&gt; [10,] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE</span>

<span class="co">## use masking raster to remove numbers divisible by 10</span>
<span class="va">r</span> <span class="op">&lt;-</span> <span class="va">r1</span>
<span class="va">r</span><span class="op">[</span><span class="va">masking_raster</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span>
<span class="co">#&gt;  [1,]    1    2    3    4    5    6    7    8    9    NA</span>
<span class="co">#&gt;  [2,]   11   12   13   14   15   16   17   18   19    NA</span>
<span class="co">#&gt;  [3,]   21   22   23   24   25   26   27   28   29    NA</span>
<span class="co">#&gt;  [4,]   31   32   33   34   35   36   37   38   39    NA</span>
<span class="co">#&gt;  [5,]   41   42   43   44   45   46   47   48   49    NA</span>
<span class="co">#&gt;  [6,]   51   52   53   54   55   56   57   58   59    NA</span>
<span class="co">#&gt;  [7,]   61   62   63   64   65   66   67   68   69    NA</span>
<span class="co">#&gt;  [8,]   71   72   73   74   75   76   77   78   79    NA</span>
<span class="co">#&gt;  [9,]   81   82   83   84   85   86   87   88   89    NA</span>
<span class="co">#&gt; [10,]   91   92   93   94   95   96   97   98   99    NA</span>

<span class="co"># mask removes all values in r2 that are NA in r</span>
<span class="va">rm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/mask.html">mask</a></span><span class="op">(</span><span class="va">r2</span>, <span class="va">r</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">rm</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span>
<span class="co">#&gt;  [1,]  101  102  103  104  105  106  107  108  109    NA</span>
<span class="co">#&gt;  [2,]  111  112  113  114  115  116  117  118  119    NA</span>
<span class="co">#&gt;  [3,]  121  122  123  124  125  126  127  128  129    NA</span>
<span class="co">#&gt;  [4,]  131  132  133  134  135  136  137  138  139    NA</span>
<span class="co">#&gt;  [5,]  141  142  143  144  145  146  147  148  149    NA</span>
<span class="co">#&gt;  [6,]  151  152  153  154  155  156  157  158  159    NA</span>
<span class="co">#&gt;  [7,]  161  162  163  164  165  166  167  168  169    NA</span>
<span class="co">#&gt;  [8,]  171  172  173  174  175  176  177  178  179    NA</span>
<span class="co">#&gt;  [9,]  181  182  183  184  185  186  187  188  189    NA</span>
<span class="co">#&gt; [10,]  191  192  193  194  195  196  197  198  199    NA</span></code></pre></div>
</div>
<div id="cover" class="section level2">
<h2 class="hasAnchor">
<a href="#cover" class="anchor"></a>cover</h2>
<ul>
<li>replaces NA values in first layer with values from the second layer</li>
</ul>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">rm</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span>
<span class="co">#&gt;  [1,]  101  102  103  104  105  106  107  108  109    NA</span>
<span class="co">#&gt;  [2,]  111  112  113  114  115  116  117  118  119    NA</span>
<span class="co">#&gt;  [3,]  121  122  123  124  125  126  127  128  129    NA</span>
<span class="co">#&gt;  [4,]  131  132  133  134  135  136  137  138  139    NA</span>
<span class="co">#&gt;  [5,]  141  142  143  144  145  146  147  148  149    NA</span>
<span class="co">#&gt;  [6,]  151  152  153  154  155  156  157  158  159    NA</span>
<span class="co">#&gt;  [7,]  161  162  163  164  165  166  167  168  169    NA</span>
<span class="co">#&gt;  [8,]  171  172  173  174  175  176  177  178  179    NA</span>
<span class="co">#&gt;  [9,]  181  182  183  184  185  186  187  188  189    NA</span>
<span class="co">#&gt; [10,]  191  192  193  194  195  196  197  198  199    NA</span>
<span class="va">rm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/cover.html">cover</a></span><span class="op">(</span><span class="va">rm</span>, <span class="va">r1</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">rm</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span>
<span class="co">#&gt;  [1,]  101  102  103  104  105  106  107  108  109    10</span>
<span class="co">#&gt;  [2,]  111  112  113  114  115  116  117  118  119    20</span>
<span class="co">#&gt;  [3,]  121  122  123  124  125  126  127  128  129    30</span>
<span class="co">#&gt;  [4,]  131  132  133  134  135  136  137  138  139    40</span>
<span class="co">#&gt;  [5,]  141  142  143  144  145  146  147  148  149    50</span>
<span class="co">#&gt;  [6,]  151  152  153  154  155  156  157  158  159    60</span>
<span class="co">#&gt;  [7,]  161  162  163  164  165  166  167  168  169    70</span>
<span class="co">#&gt;  [8,]  171  172  173  174  175  176  177  178  179    80</span>
<span class="co">#&gt;  [9,]  181  182  183  184  185  186  187  188  189    90</span>
<span class="co">#&gt; [10,]  191  192  193  194  195  196  197  198  199   100</span></code></pre></div>
</div>
<div id="overlay" class="section level2">
<h2 class="hasAnchor">
<a href="#overlay" class="anchor"></a>overlay</h2>
<ul>
<li>combines multiple raster layers</li>
</ul>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">st</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/overlay.html">overlay</a></span><span class="op">(</span><span class="va">r1</span>, <span class="va">r2</span>, <span class="va">r3</span>, fun <span class="op">=</span> <span class="va">mean</span><span class="op">)</span>

<span class="co"># can also use summary functions directly</span>
<span class="va">st</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">r1</span>, <span class="va">r2</span>, <span class="va">r3</span><span class="op">)</span> <span class="co"># across raster layers</span>
<span class="va">st</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">s</span><span class="op">)</span> <span class="co"># layers within raster stack</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">st</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span>
<span class="co">#&gt;  [1,]  101  102  103  104  105  106  107  108  109   110</span>
<span class="co">#&gt;  [2,]  111  112  113  114  115  116  117  118  119   120</span>
<span class="co">#&gt;  [3,]  121  122  123  124  125  126  127  128  129   130</span>
<span class="co">#&gt;  [4,]  131  132  133  134  135  136  137  138  139   140</span>
<span class="co">#&gt;  [5,]  141  142  143  144  145  146  147  148  149   150</span>
<span class="co">#&gt;  [6,]  151  152  153  154  155  156  157  158  159   160</span>
<span class="co">#&gt;  [7,]  161  162  163  164  165  166  167  168  169   170</span>
<span class="co">#&gt;  [8,]  171  172  173  174  175  176  177  178  179   180</span>
<span class="co">#&gt;  [9,]  181  182  183  184  185  186  187  188  189   190</span>
<span class="co">#&gt; [10,]  191  192  193  194  195  196  197  198  199   200</span></code></pre></div>
</div>
<div id="merge" class="section level2">
<h2 class="hasAnchor">
<a href="#merge" class="anchor"></a>merge</h2>
<ul>
<li>Merges 2 or more raster layers, with the same resolution and origin into a single raster layer. Overlapping values are taken from the first layer</li>
</ul>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/crop.html">crop</a></span><span class="op">(</span><span class="va">r1</span>, <span class="fu"><a href="https://rdrr.io/pkg/raster/man/extent.html">extent</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">600</span>, <span class="fl">0</span>, <span class="fl">1000</span><span class="op">)</span><span class="op">)</span>
<span class="va">rr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/crop.html">crop</a></span><span class="op">(</span><span class="va">r2</span>, <span class="fu"><a href="https://rdrr.io/pkg/raster/man/extent.html">extent</a></span><span class="op">(</span><span class="fl">400</span>, <span class="fl">1000</span>, <span class="fl">0</span>, <span class="fl">1000</span><span class="op">)</span><span class="op">)</span>
<span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/merge.html">merge</a></span><span class="op">(</span><span class="va">rl</span>, <span class="va">rr</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span>
<span class="co">#&gt;  [1,]    1    2    3    4    5    6  107  108  109   110</span>
<span class="co">#&gt;  [2,]   11   12   13   14   15   16  117  118  119   120</span>
<span class="co">#&gt;  [3,]   21   22   23   24   25   26  127  128  129   130</span>
<span class="co">#&gt;  [4,]   31   32   33   34   35   36  137  138  139   140</span>
<span class="co">#&gt;  [5,]   41   42   43   44   45   46  147  148  149   150</span>
<span class="co">#&gt;  [6,]   51   52   53   54   55   56  157  158  159   160</span>
<span class="co">#&gt;  [7,]   61   62   63   64   65   66  167  168  169   170</span>
<span class="co">#&gt;  [8,]   71   72   73   74   75   76  177  178  179   180</span>
<span class="co">#&gt;  [9,]   81   82   83   84   85   86  187  188  189   190</span>
<span class="co">#&gt; [10,]   91   92   93   94   95   96  197  198  199   200</span>
<span class="va">r</span>
<span class="co">#&gt; class      : RasterLayer </span>
<span class="co">#&gt; dimensions : 10, 10, 100  (nrow, ncol, ncell)</span>
<span class="co">#&gt; resolution : 100, 100  (x, y)</span>
<span class="co">#&gt; extent     : 0, 1000, 0, 1000  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; crs        : +proj=utm +zone=48 +datum=WGS84 +units=m +no_defs </span>
<span class="co">#&gt; source     : memory</span>
<span class="co">#&gt; names      : layer </span>
<span class="co">#&gt; values     : 1, 200  (min, max)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span></code></pre></div>
<p><img src="raster_package_tutorial_notes_files/figure-html/unnamed-chunk-33-1.png" width="700"></p>
</div>
<div id="resample" class="section level2">
<h2 class="hasAnchor">
<a href="#resample" class="anchor"></a>resample</h2>
<ul>
<li>transfers values between cells within non-matching raster layers, using nearest heighbour for categorical data and bilinear interpolation for numerical data</li>
</ul>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/projectRaster.html">projectExtent</a></span><span class="op">(</span><span class="va">r1</span>, crs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/projection.html">crs</a></span><span class="op">(</span><span class="va">r1</span><span class="op">)</span><span class="op">)</span>
<span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/resample.html">resample</a></span><span class="op">(</span><span class="va">r1</span>, <span class="va">r</span>, method <span class="op">=</span> <span class="st">'bilinear'</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]</span>
<span class="co">#&gt;  [1,]    1    2    3    4    5    6    7    8    9    10</span>
<span class="co">#&gt;  [2,]   11   12   13   14   15   16   17   18   19    20</span>
<span class="co">#&gt;  [3,]   21   22   23   24   25   26   27   28   29    30</span>
<span class="co">#&gt;  [4,]   31   32   33   34   35   36   37   38   39    40</span>
<span class="co">#&gt;  [5,]   41   42   43   44   45   46   47   48   49    50</span>
<span class="co">#&gt;  [6,]   51   52   53   54   55   56   57   58   59    60</span>
<span class="co">#&gt;  [7,]   61   62   63   64   65   66   67   68   69    70</span>
<span class="co">#&gt;  [8,]   71   72   73   74   75   76   77   78   79    80</span>
<span class="co">#&gt;  [9,]   81   82   83   84   85   86   87   88   89    90</span>
<span class="co">#&gt; [10,]   91   92   93   94   95   96   97   98   99   100</span>
<span class="va">r</span>
<span class="co">#&gt; class      : RasterLayer </span>
<span class="co">#&gt; dimensions : 10, 10, 100  (nrow, ncol, ncell)</span>
<span class="co">#&gt; resolution : 100, 100  (x, y)</span>
<span class="co">#&gt; extent     : 0, 1000, 0, 1000  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; crs        : +proj=utm +zone=48 +datum=WGS84 +units=m +no_defs </span>
<span class="co">#&gt; source     : memory</span>
<span class="co">#&gt; names      : layer </span>
<span class="co">#&gt; values     : 1, 100  (min, max)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span></code></pre></div>
<p><img src="raster_package_tutorial_notes_files/figure-html/unnamed-chunk-34-1.png" width="700"></p>
</div>
</div>
<div id="identify-value-patterns" class="section level1">
<h1 class="hasAnchor">
<a href="#identify-value-patterns" class="anchor"></a>Identify value patterns</h1>
<div id="clump" class="section level2">
<h2 class="hasAnchor">
<a href="#clump" class="anchor"></a>clump</h2>
<ul>
<li>identifies groups of cells that are connected with the same values</li>
</ul>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html">raster</a></span><span class="op">(</span>ncols <span class="op">=</span> <span class="fl">12</span>, nrows <span class="op">=</span> <span class="fl">12</span>, vals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">144</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.7</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]</span>
<span class="co">#&gt;  [1,]    1    0    0    0    0    0    0    1    0     1     0     0</span>
<span class="co">#&gt;  [2,]    0    1    0    0    0    0    1    0    0     0     0     0</span>
<span class="co">#&gt;  [3,]    0    0    0    0    0    0    0    0    0     1     0     0</span>
<span class="co">#&gt;  [4,]    0    0    0    0    1    0    0    0    0     1     0     0</span>
<span class="co">#&gt;  [5,]    0    0    0    1    1    0    0    0    0     0     0     0</span>
<span class="co">#&gt;  [6,]    0    1    0    0    0    0    0    1    0     0     1     0</span>
<span class="co">#&gt;  [7,]    0    0    0    1    1    0    0    0    0     0     0     1</span>
<span class="co">#&gt;  [8,]    0    0    0    0    1    0    0    0    1     0     0     0</span>
<span class="co">#&gt;  [9,]    0    0    0    0    0    1    1    1    0     0     1     0</span>
<span class="co">#&gt; [10,]    0    0    0    0    0    0    0    1    0     0     0     0</span>
<span class="co">#&gt; [11,]    0    1    0    0    1    0    0    0    0     1     1     1</span>
<span class="co">#&gt; [12,]    0    1    0    0    0    0    1    1    0     0     0     0</span>
<span class="va">rc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/clump.html">clump</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">rc</span><span class="op">)</span>
<span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]</span>
<span class="co">#&gt;  [1,]    1   NA   NA   NA   NA   NA   NA    2   NA     3    NA    NA</span>
<span class="co">#&gt;  [2,]   NA    1   NA   NA   NA   NA    2   NA   NA    NA    NA    NA</span>
<span class="co">#&gt;  [3,]   NA   NA   NA   NA   NA   NA   NA   NA   NA     4    NA    NA</span>
<span class="co">#&gt;  [4,]   NA   NA   NA   NA    5   NA   NA   NA   NA     4    NA    NA</span>
<span class="co">#&gt;  [5,]   NA   NA   NA    5    5   NA   NA   NA   NA    NA    NA    NA</span>
<span class="co">#&gt;  [6,]   NA    6   NA   NA   NA   NA   NA    7   NA    NA     8    NA</span>
<span class="co">#&gt;  [7,]   NA   NA   NA    9    9   NA   NA   NA   NA    NA    NA     8</span>
<span class="co">#&gt;  [8,]   NA   NA   NA   NA    9   NA   NA   NA    9    NA    NA    NA</span>
<span class="co">#&gt;  [9,]   NA   NA   NA   NA   NA    9    9    9   NA    NA    10    NA</span>
<span class="co">#&gt; [10,]   NA   NA   NA   NA   NA   NA   NA    9   NA    NA    NA    NA</span>
<span class="co">#&gt; [11,]   NA   11   NA   NA   12   NA   NA   NA   NA    13    13    13</span>
<span class="co">#&gt; [12,]   NA   11   NA   NA   NA   NA   14   14   NA    NA    NA    NA</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">rc</span><span class="op">)</span></code></pre></div>
<p><img src="raster_package_tutorial_notes_files/figure-html/unnamed-chunk-35-1.png" width="700"></p>
</div>
<div id="boundaries" class="section level2">
<h2 class="hasAnchor">
<a href="#boundaries" class="anchor"></a>boundaries</h2>
<ul>
<li>identifies transitions between cell values as edges</li>
</ul>
</div>
<div id="identify-value-distances" class="section level2">
<h2 class="hasAnchor">
<a href="#identify-value-distances" class="anchor"></a>Identify value distances</h2>
<ul>
<li>More advanced distance calculations are found in gdistance package</li>
</ul>
</div>
<div id="distance" class="section level2">
<h2 class="hasAnchor">
<a href="#distance" class="anchor"></a>distance</h2>
<ul>
<li>computes the shortest distance to cells that are not NA</li>
</ul>
</div>
<div id="pointdistance" class="section level2">
<h2 class="hasAnchor">
<a href="#pointdistance" class="anchor"></a>pointDistance</h2>
<ul>
<li>computes the shortest distance to any point in a set of points</li>
</ul>
</div>
<div id="griddistance" class="section level2">
<h2 class="hasAnchor">
<a href="#griddistance" class="anchor"></a>gridDistance</h2>
<ul>
<li>computes distance when following grid cells that can be traversed (e.g.Â excluding water bodies)</li>
</ul>
</div>
<div id="adjacent" class="section level2">
<h2 class="hasAnchor">
<a href="#adjacent" class="anchor"></a>adjacent</h2>
<ul>
<li>identifies which cells are adjacent to other cells</li>
</ul>
</div>
<div id="direction" class="section level2">
<h2 class="hasAnchor">
<a href="#direction" class="anchor"></a>direction</h2>
<ul>
<li>computes the direction towards (or from) the nearest cell that is not NA</li>
</ul>
</div>
</div>
<div id="raster-to-vector-layer" class="section level1">
<h1 class="hasAnchor">
<a href="#raster-to-vector-layer" class="anchor"></a>Raster to Vector layer</h1>
<div id="rastertopoints" class="section level2">
<h2 class="hasAnchor">
<a href="#rastertopoints" class="anchor"></a>rasterToPoints</h2>
<ul>
<li>convert raster cell values to centre of cell points</li>
</ul>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/rasterToPoints.html">rasterToPoints</a></span><span class="op">(</span><span class="va">r1</span>, spatial <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">pt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html">st_as_sf</a></span><span class="op">(</span><span class="va">pt</span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">pt</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">layer</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_color_viridis_c</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="raster_package_tutorial_notes_files/figure-html/unnamed-chunk-36-1.png" width="700"></p>
</div>
<div id="rastertopolygons" class="section level2">
<h2 class="hasAnchor">
<a href="#rastertopolygons" class="anchor"></a>rasterToPolygons</h2>
<ul>
<li>converts raster cell values to polygons with option of dissolving polygons with same cell values</li>
</ul>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">py</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/rasterToPolygons.html">rasterToPolygons</a></span><span class="op">(</span><span class="va">r1</span><span class="op">)</span>
<span class="va">py</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html">st_as_sf</a></span><span class="op">(</span><span class="va">py</span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">py</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">layer</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_fill_viridis_c</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="raster_package_tutorial_notes_files/figure-html/unnamed-chunk-37-1.png" width="700"></p>
</div>
</div>
<div id="large-raster-files" class="section level1">
<h1 class="hasAnchor">
<a href="#large-raster-files" class="anchor"></a>Large raster files</h1>
<div id="processing-data-in-chunks" class="section level2">
<h2 class="hasAnchor">
<a href="#processing-data-in-chunks" class="anchor"></a>Processing data in chunks</h2>
<ul>
<li>The Raster package by Robert J. Hijmans Chapter 10 section 10.4 - 10.6</li>
</ul>
</div>
<div id="multi-core-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#multi-core-functions" class="anchor"></a>Multi-core functions</h2>
<ul>
<li>The Raster package by Robert J. Hijmans Chapter 10 section 10.9</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Graham French.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
